<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2025æ²–ç¹©è¡Œ</title>
    
    <!-- Web App Settings -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0ea5e9">
    
    <!-- Dynamic App Icon (Plane Emoji on Blue Background) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%230ea5e9%22 rx=%2220%22/><text x=%2250%22 y=%2250%22 dominant-baseline=%22central%22 text-anchor=%22middle%22 font-size=%2260%22>âœˆï¸</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%230ea5e9%22 rx=%2220%22/><text x=%2250%22 y=%2250%22 dominant-baseline=%22central%22 text-anchor=%22middle%22 font-size=%2260%22>âœˆï¸</text></svg>">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        
        html {
            scroll-behavior: smooth; /* Enable smooth scrolling */
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff; /* Light Blue Background */
            /* Prevent pull-to-refresh on mobile to feel more like an app */
            overscroll-behavior-y: none;
        }

        .gradient-header {
            background: linear-gradient(135deg, #0ea5e9 0%, #2563eb 100%);
            padding-top: env(safe-area-inset-top); /* Handle iPhone Notch */
        }

        .timeline-line {
            position: absolute;
            left: 1rem;
            top: 2.5rem;
            bottom: 0;
            width: 2px;
            background-color: #e5e7eb;
            z-index: 0;
        }

        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Map Link Styling */
        .map-link {
            color: #1f2937; /* gray-800 */
            text-decoration: none;
            border-bottom: 2px dotted #60a5fa; /* blue-400 */
            padding-bottom: 1px;
            transition: all 0.2s;
        }
        
        .map-link:hover {
            color: #2563eb; /* blue-600 */
            border-bottom-style: solid;
        }

        .map-icon {
            font-size: 0.8em;
            color: #3b82f6;
            margin-left: 4px;
        }

        .flight-badge {
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 4px;
        }
        .badge-tw { background-color: #e5e7eb; color: #374151; } /* Gray for Taiwan */
        .badge-jp { background-color: #dbeafe; color: #1e40af; } /* Blue for Japan */

        /* Calculator Styles */
        .calc-input {
            width: 100%;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 0.25rem 0.5rem;
            font-size: 1.1rem;
            font-weight: bold;
            text-align: right;
            color: #374151;
            background-color: #f9fafb;
        }
        .calc-input:focus {
            outline: none;
            border-color: #3b82f6;
            background-color: white;
        }
        .calc-label {
            font-size: 0.75rem;
            color: #6b7280;
            margin-bottom: 2px;
        }

        /* Custom Scrollbar for Forecast List */
        .forecast-list::-webkit-scrollbar {
            width: 4px;
        }
        .forecast-list::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        /* --- PRINT STYLES START --- */
        @media print {
            /* Basic Reset */
            body {
                background-color: white !important;
                color: black !important;
                padding-bottom: 0 !important;
            }
            
            /* Hide UI elements unnecessary for paper */
            .no-print, 
            footer, 
            .sticky, 
            .animate-pulse {
                display: none !important;
            }

            /* Adjust Cards for Print */
            .card-shadow {
                box-shadow: none !important;
                border: 1px solid #ccc !important;
                break-inside: avoid; /* Prevent card from splitting */
            }

            /* Gradient Header adjustment for print */
            .gradient-header {
                background: white !important;
                color: black !important;
                padding: 10px !important;
                border-bottom: 2px solid #0ea5e9;
                text-align: center;
                box-shadow: none !important;
            }
            .gradient-header p {
                color: #333 !important;
                justify-content: center;
            }
            .gradient-header i {
                color: #0ea5e9;
            }
            /* Hide the decorative background plane icon in header */
            .gradient-header .absolute {
                display: none !important;
            }

            /* Page Break Logic */
            section {
                page-break-before: always; /* Force new page for each section */
                break-before: page;
                margin-top: 0 !important;
                padding-top: 20px !important;
            }

            /* Ensure links are visible but black */
            a {
                color: black !important;
                text-decoration: underline;
                border: none !important;
            }
        }
        /* --- PRINT STYLES END --- */
    </style>
</head>
<body class="text-gray-700 pb-12">

    <!-- Header Section -->
    <header class="gradient-header text-white p-6 rounded-b-3xl shadow-lg relative overflow-hidden">
        <div class="absolute top-0 right-0 opacity-10 text-9xl transform translate-x-10 -translate-y-10">
            <i class="fa-solid fa-plane-departure"></i>
        </div>
        <div class="relative z-10 mt-4 md:mt-0">
            <h1 class="text-3xl font-bold mb-2">2025æ²–ç¹©è¡Œ</h1>
            <p class="text-blue-100 flex items-center gap-2">
                <i class="fa-solid fa-calendar-days"></i> 11/27 (å››) â€” 11/30 (æ—¥)
            </p>
            <p class="text-blue-100 mt-1 flex items-center gap-2">
                <i class="fa-solid fa-users"></i> 5 å¤§ 1 å° (è¦ªå­è‡ªé§•)
            </p>
        </div>
    </header>

    <!-- Essential Info Cards -->
    <div class="px-4 mt-6 grid grid-cols-2 gap-3">
        <!-- Flight Outbound -->
        <div class="bg-white p-3 rounded-xl card-shadow border-l-4 border-blue-400">
            <div class="text-blue-500 mb-1 text-xs"><i class="fa-solid fa-plane-departure"></i> å»ç¨‹ CI0120</div>
            <div class="font-bold text-base">08:10 TPE</div>
            <div class="text-xs text-gray-500">10:45 æŠµé” OKA</div>
        </div>
        <!-- Flight Inbound -->
        <div class="bg-white p-3 rounded-xl card-shadow border-l-4 border-blue-600">
            <div class="text-blue-600 mb-1 text-xs"><i class="fa-solid fa-plane-arrival"></i> å›ç¨‹ CI0121</div>
            <div class="font-bold text-base">11:55 OKA</div>
            <div class="text-xs text-gray-500">12:35 æŠµé” TPE</div>
        </div>
    </div>
    
    <!-- Car Info -->
    <div class="px-4 mt-3">
        <div class="bg-white p-4 rounded-xl card-shadow">
            <div class="flex justify-between items-start">
                <div>
                    <div class="text-green-500 mb-1"><i class="fa-solid fa-car"></i> OTS ç§Ÿè»Š</div>
                    <a href="https://www.google.com/maps/search/?api=1&query=æ—¥æœ¬æ²–ç¹©ç¸£è±è¦‹åŸå¸‚è±å´3-37" target="_blank" class="font-bold text-lg block hover:text-blue-600">
                        è±å´ å–/é‚„ <i class="fa-solid fa-map-location-dot text-sm ml-1"></i>
                    </a>
                    <div class="text-xs text-gray-500 mb-1">è±è¦‹åŸå¸‚è±å´3-37</div>
                </div>
                <div class="bg-green-50 text-green-700 px-2 py-1 rounded text-xs font-bold">
                    5å¤§1å°
                </div>
            </div>
        </div>
    </div>

    <!-- UTILITIES SECTION: Weather & Currency -->
    <div class="px-4 mt-4 grid grid-cols-1 md:grid-cols-2 gap-3">
        <!-- Weather Forecast (11/27-11/30) -->
        <div class="bg-gradient-to-br from-cyan-500 to-blue-600 p-3 rounded-xl card-shadow text-white relative overflow-hidden">
            <div class="flex justify-between items-center mb-2 z-10 relative">
                <div class="text-xs font-bold opacity-90"><i class="fa-solid fa-cloud-sun"></i> æ—…ç¨‹å¤©æ°£ (11/27-30)</div>
                <a href="https://www.google.com/search?q=weather+Okinawa+Naha" target="_blank" class="text-[10px] bg-white/20 px-2 py-0.5 rounded hover:bg-white/30 transition">è©³æƒ… <i class="fa-solid fa-arrow-right"></i></a>
            </div>
            
            <!-- Forecast Grid Container (Updated for new layout) -->
            <div id="forecast-container" class="grid grid-cols-4 gap-2 z-10 relative mt-2">
                <div class="col-span-4 text-center text-xs opacity-80 py-4"><i class="fa-solid fa-spinner fa-spin"></i> è¼‰å…¥é å ±ä¸­...</div>
            </div>

            <!-- Background Decoration -->
            <div class="absolute -bottom-4 -right-4 text-white opacity-10 text-6xl transform rotate-12 pointer-events-none">
                <i class="fa-solid fa-sun"></i>
            </div>
        </div>

        <!-- Currency Calculator -->
        <div class="bg-white p-3 rounded-xl card-shadow border border-gray-100 relative">
            <div class="flex justify-between items-center mb-2">
                <div class="text-xs font-bold text-gray-500"><i class="fa-solid fa-calculator"></i> åŒ¯ç‡è©¦ç®—</div>
                <div id="rate-status" class="text-[10px] text-gray-400"><i class="fa-solid fa-spinner fa-spin"></i> æ›´æ–°ä¸­...</div>
            </div>
            
            <div class="space-y-2">
                <!-- JPY Input -->
                <div class="flex items-center gap-1">
                    <span class="text-xs font-bold text-blue-600 w-6">Â¥</span>
                    <input type="number" id="calc-jpy" class="calc-input" placeholder="æ—¥å¹£">
                </div>
                <!-- TWD Input -->
                <div class="flex items-center gap-1">
                    <span class="text-xs font-bold text-gray-600 w-6">$</span>
                    <input type="number" id="calc-twd" class="calc-input" placeholder="å°å¹£">
                </div>
            </div>

            <!-- Rate Setting -->
            <div class="mt-2 pt-2 border-t border-gray-100 flex justify-between items-center">
                <span class="text-[10px] text-gray-400">åŒ¯ç‡ (1æ—¥å¹£):</span>
                <input type="number" id="calc-rate" value="0.215" step="0.0001" class="w-16 text-[10px] text-right bg-transparent border-b border-gray-300 focus:outline-none focus:border-blue-500 text-gray-500">
            </div>
        </div>
    </div>

    <!-- Navigation Tabs (Anchor Links) - Hidden in Print -->
    <div id="nav-container" class="no-print flex overflow-x-auto gap-2 px-4 mt-6 pb-2 hide-scrollbar sticky top-0 bg-[#f0f9ff] z-50 py-2">
        <a href="#day1" class="nav-link flex-shrink-0 bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-bold shadow transition active:scale-95">Day 1 æŠµé”</a>
        <a href="#day2" class="nav-link flex-shrink-0 bg-white text-blue-600 px-4 py-2 rounded-full text-sm font-bold shadow transition active:scale-95">Day 2 æ°´æ—é¤¨</a>
        <a href="#day3" class="nav-link flex-shrink-0 bg-white text-blue-600 px-4 py-2 rounded-full text-sm font-bold shadow transition active:scale-95">Day 3 ç¾åœ‹æ‘</a>
        <a href="#day4" class="nav-link flex-shrink-0 bg-white text-blue-600 px-4 py-2 rounded-full text-sm font-bold shadow transition active:scale-95">Day 4 è¿”å°</a>
    </div>

    <!-- Main Content -->
    <main class="px-4 mt-4 space-y-8">

        <!-- Day 1 -->
        <section id="day1" class="scroll-mt-16">
            <div class="flex items-center gap-3 mb-4">
                <div class="bg-blue-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold">D1</div>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">11/27 (å››) æŠµé” & è³¼ç‰©</h2>
                    <p class="text-sm text-gray-500">ä½ï¼šSoutherlies Condominium Onna</p>
                </div>
            </div>
            
            <!-- FLIGHT CARD: CI120 -->
            <div class="bg-gradient-to-r from-blue-50 to-white border border-blue-200 p-4 rounded-xl mb-4 shadow-sm relative overflow-hidden">
                <div class="absolute right-0 top-0 bg-blue-100 text-blue-600 text-xs px-2 py-1 rounded-bl-lg font-bold">å»ç¨‹</div>
                <div class="flex justify-between items-start mb-2">
                    <h3 class="font-bold text-lg text-blue-800"><i class="fa-solid fa-plane"></i> CI 0120</h3>
                    <!-- Real-time Status Link -->
                    <a href="https://www.google.com/search?q=flight+CI120" target="_blank" class="flex items-center gap-1 bg-white text-red-500 border border-red-200 px-3 py-1 rounded-full text-xs font-bold shadow-sm hover:bg-red-50 animate-pulse">
                        <i class="fa-solid fa-tower-broadcast"></i> å³æ™‚èˆªå»ˆ/ç™»æ©Ÿå£
                    </a>
                </div>
                <div class="flex items-center justify-between text-sm">
                    <div class="text-center">
                        <div class="font-bold text-xl text-gray-800">08:10</div>
                        <div class="text-xs text-gray-500">å°åŒ— TPE (T2)</div>
                        <span class="flight-badge badge-tw">å°ç£æ™‚é–“</span>
                    </div>
                    <div class="flex-1 border-t-2 border-dotted border-gray-300 mx-2 relative top-[-10px]">
                        <i class="fa-solid fa-plane text-blue-300 absolute top-[-9px] left-1/2 transform -translate-x-1/2"></i>
                    </div>
                    <div class="text-center">
                        <div class="font-bold text-xl text-gray-800">10:45</div>
                        <div class="text-xs text-gray-500">æ²–ç¹© OKA</div>
                        <span class="flight-badge badge-jp">æ—¥æœ¬æ™‚é–“</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-5 card-shadow space-y-6 relative overflow-hidden">
                <div class="timeline-line"></div>

                <!-- Item -->
                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-blue-400 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        10:45 æŠµé” <a href="https://www.google.com/maps/search/?api=1&query=Naha+Airport" target="_blank" class="map-link">é‚£éœ¸æ©Ÿå ´ (OKA)<i class="fa-solid fa-map-location-dot map-icon"></i></a>
                    </div>
                    <div class="text-sm text-gray-600 mt-1">å…¥å¢ƒæ‰‹çºŒï¼Œå‰å¾€æ¥é§è»Šè™•ã€‚</div>
                </div>

                <!-- Item -->
                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        11:30 <a href="https://www.google.com/maps/search/?api=1&query=æ—¥æœ¬æ²–ç¹©ç¸£è±è¦‹åŸå¸‚è±å´3-37" target="_blank" class="map-link">OTS è±å´åº—<i class="fa-solid fa-map-location-dot map-icon"></i></a> å–è»Š
                    </div>
                    <div class="text-xs text-gray-500 mt-1 mb-1"><i class="fa-solid fa-location-dot"></i> è±è¦‹åŸå¸‚è±å´3-37</div>
                    <div class="text-sm text-gray-600">
                        <span class="bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs">æé†’</span> æª¢æŸ¥å…’ç«¥åº§æ¤…å®‰è£ã€‚
                    </div>
                </div>

                <!-- Item -->
                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-red-400 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        13:00 ã€åˆé¤ã€‘<a href="https://www.google.com/maps/search/?api=1&query=Jojoen+Parco+City" target="_blank" class="map-link">æ•˜æ•˜è‹‘ç‡’è‚‰<i class="fa-solid fa-map-location-dot map-icon"></i></a> <i class="fa-solid fa-check text-green-500 ml-1"></i>
                    </div>
                    <div class="bg-red-50 p-2 rounded mt-1 border border-red-100">
                        <div class="text-sm font-bold text-red-600"><i class="fa-regular fa-clock"></i> å·²é ç´„ 13:00</div>
                        <div class="text-xs text-gray-600">PARCO CITY 3F (ç¶ è‰²å€åŸŸ)</div>
                    </div>
                    <div class="text-sm text-gray-600 mt-2">
                        <i class="fa-solid fa-bag-shopping text-blue-400"></i> 14:30 è‡ªç”±é€›è¡— (è¥¿æ¾å±‹/Uniqlo/è¶…å¸‚)
                    </div>
                </div>

                <!-- Drive Info -->
                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-gray-400 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">16:30 é–‹è»ŠåŒ—ä¸Š (å¾€æ©ç´)</div>
                    <div class="bg-yellow-50 p-3 rounded-lg mt-2 border-l-4 border-yellow-400">
                        <div class="text-xs font-bold text-yellow-700 flex items-center gap-1">
                            <i class="fa-solid fa-triangle-exclamation"></i> å°èˆªè¨­å®šæ³¨æ„
                        </div>
                        <div class="text-sm text-gray-700 mt-1">
                            è¥¿åŸ IC â†’ çŸ³å· IC (æ²–ç¹©è‡ªå‹•è»Šé“)<br>
                            <span class="text-xs text-red-500 font-bold">*é¿é–‹ç¾è»åŸºåœ°è·¯ç·šä»¥å…å¡è»Š</span>
                        </div>
                    </div>
                </div>

                <!-- Dinner -->
                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-orange-400 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        17:30 ã€æ™šé¤ã€‘<a href="https://www.google.com/maps/search/?api=1&query=Hamanoya+Seafood" target="_blank" class="map-link">æµœã®å®¶æµ·é®®æ–™ç†<i class="fa-solid fa-map-location-dot map-icon"></i></a>
                    </div>
                    <div class="text-sm text-gray-600 mt-1">å¿…é»ï¼šé»ƒæ²¹çƒ¤é­šå®šé£Ÿã€æµ·é®®æ±</div>
                    <div class="text-xs text-red-500 mt-1"><i class="fa-solid fa-circle-exclamation"></i> 20:00 æ‰“çƒŠï¼Œå‹™å¿…æº–æ™‚</div>
                </div>

                 <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-indigo-400 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        19:00 <a href="https://www.google.com/maps/search/?api=1&query=973+Maeganeku,+Onna,+Kunigami+District,+Okinawa+904-0414" target="_blank" class="map-link">é£¯åº— Check-in<i class="fa-solid fa-map-location-dot map-icon"></i></a>
                    </div>
                    <div class="text-sm text-gray-600">Southerlies Condominium Onna</div>
                    <div class="text-xs text-gray-500 mt-1"><i class="fa-solid fa-location-dot"></i> 973 Maeganeku, Onna</div>
                </div>
            </div>
        </section>

        <!-- Day 2 -->
        <section id="day2" class="scroll-mt-16">
            <div class="flex items-center gap-3 mb-4">
                <div class="bg-cyan-500 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold">D2</div>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">11/28 (äº”) æ°´æ—é¤¨</h2>
                    <p class="text-sm text-gray-500">ä½ï¼šSoutherlies Condominium (çºŒä½)</p>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-5 card-shadow space-y-6 relative overflow-hidden">
                 <div class="timeline-line"></div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-gray-400 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">08:30 é£¯åº—å‡ºç™¼</div>
                    <div class="text-sm text-gray-600">è¡Œé§›åœ‹é“ 58 è™Ÿæ²¿æµ· (é¢¨æ™¯å„ªç¾)</div>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-cyan-500 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        10:00 <a href="https://www.google.com/maps/search/?api=1&query=Okinawa+Churaumi+Aquarium" target="_blank" class="map-link">ç¾éº—æµ·æ°´æ—é¤¨<i class="fa-solid fa-map-location-dot map-icon"></i></a>
                    </div>
                    <div class="text-xs bg-blue-100 text-blue-800 inline-block px-2 py-0.5 rounded mb-1">åœè»Šå»ºè­°: P7 ç«‹é«”åœè»Šå ´</div>
                    <div class="text-sm text-gray-600">é‡é»ï¼šé»‘æ½®ä¹‹æµ·ã€è§¸æ‘¸æ± </div>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-blue-500 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        11:30 <a href="https://www.google.com/maps/search/?api=1&query=Okichan+Theater" target="_blank" class="map-link">æµ·è±šè¡¨æ¼” (Okichan)<i class="fa-solid fa-map-location-dot map-icon"></i></a> ğŸ¬
                    </div>
                    <div class="text-xs text-gray-500">å‚™ç”¨å ´æ¬¡ï¼š13:00 / 15:00</div>
                    <div class="text-sm text-gray-600 mt-1">12:00 æµ·æ´‹åšå…¬åœ’ (æ”€çˆ¬ç¶²æ”¾é›»)</div>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-orange-400 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">13:00 ã€åˆé¤ã€‘äºŒé¸ä¸€</div>
                    <ul class="text-sm text-gray-600 list-disc ml-4 mt-1">
                        <li><a href="https://www.google.com/maps/search/?api=1&query=Inoh+Churaumi" target="_blank" class="hover:text-blue-600">é¤¨å…§ 4F æµ·æ™¯è‡ªåŠ©é¤ã€ŒInohã€</a></li>
                        <li><a href="https://www.google.com/maps/search/?api=1&query=Hanasaki+Marche" target="_blank" class="hover:text-blue-600">Hanasaki Marche (é£¯ç³°/æ˜Ÿå·´å…‹)</a></li>
                    </ul>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        16:00 <a href="https://www.google.com/maps/search/?api=1&query=Manzamo" target="_blank" class="map-link">è¬åº§æ¯› (è±¡é¼»å²©)<i class="fa-solid fa-map-location-dot map-icon"></i></a>
                    </div>
                    <div class="text-sm text-gray-600">æ‹ç…§æ•£æ­¥ (é›¢é–‹åŒ—éƒ¨å—ä¸‹)</div>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        17:30 <a href="https://www.google.com/maps/search/?api=1&query=101-1+Maeganeku,+Onna,+Kunigami+District,+Okinawa+904-0414" target="_blank" class="map-link">ã€æ™šé¤ã€‘ç‰çƒã®ç‰› æ©ç´åˆ¥é¤¨<i class="fa-solid fa-map-location-dot map-icon"></i></a> <i class="fa-solid fa-check text-green-500 ml-1"></i>
                    </div>
                    <div class="bg-red-50 p-2 rounded mt-1 border border-red-100">
                        <div class="text-sm font-bold text-red-600"><i class="fa-regular fa-clock"></i> å·²é ç´„ 17:30</div>
                        <div class="text-xs text-gray-600 mb-1">å‹™å¿…æº–æ™‚ï¼Œé€¾æ™‚æœƒè¢«å–æ¶ˆï¼</div>
                        <div class="text-xs text-gray-500 border-t border-red-200 pt-1">
                            <i class="fa-solid fa-location-dot"></i> 101-1 Maeganeku, Onna
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Day 3 -->
        <section id="day3" class="scroll-mt-16">
            <div class="flex items-center gap-3 mb-4">
                <div class="bg-orange-500 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold">D3</div>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">11/29 (å…­) ç¾åœ‹æ‘</h2>
                    <p class="text-sm text-gray-500">ä½ï¼šé˜¿è’™ç‰¹é£¯åº— (é‚£éœ¸ç¸£å»³å‰)</p>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-5 card-shadow space-y-6 relative overflow-hidden">
                <div class="timeline-line"></div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-gray-400 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">09:30 é£¯åº—é€€æˆ¿å—ä¸‹</div>
                    <div class="text-xs text-gray-500 mt-1">å°èˆªï¼šçŸ³å· IC â†’ æ²–ç¹©å— IC (é¿å˜‰æ‰‹ç´)</div>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-orange-500 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        10:30 <a href="https://www.google.com/maps/search/?api=1&query=American+Village+Okinawa" target="_blank" class="map-link">åŒ—è°·ç¾åœ‹æ‘<i class="fa-solid fa-map-location-dot map-icon"></i></a>
                    </div>
                    <div class="text-sm text-gray-600">Depot Island æ‹ç…§ã€è½æ—¥æµ·ç˜</div>
                    <div class="mt-2 p-2 bg-orange-50 rounded">
                        <div class="font-bold text-sm text-orange-800">
                            11:30 åˆé¤ï¼š<a href="https://www.google.com/maps/search/?api=1&query=Gourmet+Sushi+Mihama" target="_blank" class="hover:text-blue-600 underline">è¿´è½‰å£½å¸å¸‚å ´</a>
                        </div>
                        <div class="text-xs text-gray-600">ç­–ç•¥ï¼šé–‹åº—ç¬¬ä¸€è¼ªé€²å ´ï¼Œé¿æ’éšŠã€‚</div>
                    </div>
                </div>

                <!-- Strategic Split -->
                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-purple-600 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-purple-700">14:00 é—œéµåˆ†æµç­–ç•¥ <i class="fa-solid fa-shuffle"></i></div>
                    
                    <div class="mt-2 space-y-2">
                        <div class="bg-purple-50 p-3 rounded-lg border border-purple-100">
                            <div class="font-bold text-sm text-purple-900">Step 1: 15:00 æŠµé”é£¯åº—</div>
                            <div class="text-xs text-gray-600">
                                <a href="https://www.google.com/maps/search/?api=1&query=Almont+Hotel+Naha-Kenchomae" target="_blank" class="text-purple-700 underline decoration-dotted">é˜¿è’™ç‰¹é£¯åº— (ç¸£å»³å‰)<i class="fa-solid fa-location-arrow text-xs ml-1"></i></a>
                            </div>
                            <div class="text-sm font-medium text-purple-700 mt-1">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å®¶äºº + è¡Œæ ä¸‹è»Šä¼‘æ¯</div>
                        </div>

                        <div class="bg-green-50 p-3 rounded-lg border border-green-100">
                            <div class="font-bold text-sm text-green-900">Step 2: é§•é§›å»é‚„è»Š</div>
                            <div class="text-xs text-gray-600">
                                <a href="https://www.google.com/maps/search/?api=1&query=æ—¥æœ¬æ²–ç¹©ç¸£è±è¦‹åŸå¸‚è±å´3-37" target="_blank" class="text-green-700 underline decoration-dotted">OTS è±å´åº— (å…ˆåŠ æ»¿æ²¹)<i class="fa-solid fa-location-arrow text-xs ml-1"></i></a>
                            </div>
                            <div class="text-xs text-green-800 mt-1"><i class="fa-solid fa-location-dot"></i> è±è¦‹åŸå¸‚è±å´3-37</div>
                            <div class="text-sm font-medium text-green-700 mt-1">ğŸš— é§•é§› + å¤ªå¤ª å‰å¾€</div>
                        </div>
                    </div>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-indigo-400 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">17:15 å…¨å“¡é£¯åº—æœƒåˆ</div>
                    <div class="text-sm text-gray-600">é§•é§›æ­è¨ˆç¨‹è»Š/å–®è»Œè¿”å›</div>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        17:30 <a href="https://www.google.com/maps/search/?api=1&query=Okinawa,+Naha,+Asahimachi,+1+Chomeâˆ’9+ã‚«ãƒ•ãƒ¼ãƒŠæ—­æ©‹Bè¡—åŒºãƒ“ãƒ«+1ï¼¦" target="_blank" class="map-link">ã€æ™šé¤ã€‘æˆ‘é‚£éœ¸è±¬è‚‰åº— Kafunaæ—­æ©‹åº—<i class="fa-solid fa-map-location-dot map-icon"></i></a>
                    </div>
                    <div class="bg-red-50 p-2 rounded mt-1 border border-red-100">
                        <div class="text-sm font-bold text-red-600"><i class="fa-regular fa-clock"></i> ç”¨é¤æ™‚é–“ 17:30</div>
                        <div class="text-xs text-gray-600 mb-1">é˜¿å¤è±¬æ¶®æ¶®é‹ååº— ğŸ·</div>
                        <div class="text-xs text-gray-500 border-t border-red-200 pt-1">
                            <i class="fa-solid fa-location-dot"></i> æ—­æ©‹ B è¡—å€å¤§æ¨“ 1F
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Day 4 -->
        <section id="day4" class="scroll-mt-16">
            <div class="flex items-center gap-3 mb-4">
                <div class="bg-pink-500 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold">D4</div>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">11/30 (æ—¥) æœ€å¾Œæ¡è²·</h2>
                    <p class="text-sm text-gray-500">å›ç¨‹ï¼š11:55 ç­æ©Ÿ</p>
                </div>
            </div>

            <!-- FLIGHT CARD: CI121 -->
            <div class="bg-gradient-to-r from-pink-50 to-white border border-pink-200 p-4 rounded-xl mb-4 shadow-sm relative overflow-hidden">
                <div class="absolute right-0 top-0 bg-pink-100 text-pink-600 text-xs px-2 py-1 rounded-bl-lg font-bold">å›ç¨‹</div>
                <div class="flex justify-between items-start mb-2">
                    <h3 class="font-bold text-lg text-pink-800"><i class="fa-solid fa-plane-up"></i> CI 0121</h3>
                    <!-- Real-time Status Link -->
                    <a href="https://www.google.com/search?q=flight+CI121" target="_blank" class="flex items-center gap-1 bg-white text-red-500 border border-red-200 px-3 py-1 rounded-full text-xs font-bold shadow-sm hover:bg-red-50 animate-pulse">
                        <i class="fa-solid fa-tower-broadcast"></i> å³æ™‚èˆªå»ˆ/ç™»æ©Ÿå£
                    </a>
                </div>
                <div class="flex items-center justify-between text-sm">
                    <div class="text-center">
                        <div class="font-bold text-xl text-gray-800">11:55</div>
                        <div class="text-xs text-gray-500">æ²–ç¹© OKA</div>
                        <span class="flight-badge badge-jp">æ—¥æœ¬æ™‚é–“</span>
                    </div>
                    <div class="flex-1 border-t-2 border-dotted border-gray-300 mx-2 relative top-[-10px]">
                        <i class="fa-solid fa-plane text-pink-300 absolute top-[-9px] left-1/2 transform -translate-x-1/2"></i>
                    </div>
                    <div class="text-center">
                        <div class="font-bold text-xl text-gray-800">12:35</div>
                        <div class="text-xs text-gray-500">å°åŒ— TPE (T2)</div>
                        <span class="flight-badge badge-tw">å°ç£æ™‚é–“</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-5 card-shadow space-y-6 relative overflow-hidden">
                <div class="timeline-line"></div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-gray-400 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        08:30 <a href="https://www.google.com/maps/search/?api=1&query=Kokusai+Dori" target="_blank" class="map-link">åœ‹éš›é€šæ—©æ™¨æ•£æ­¥<i class="fa-solid fa-map-location-dot map-icon"></i></a> <span class="text-sm text-gray-500 font-normal">(é¸æ“‡æ€§)</span>
                    </div>
                    <div class="text-sm text-gray-600">å¾é£¯åº—æ­¥è¡Œ 3 åˆ†é˜ã€‚æŠŠæ¡æœ€å¾Œæ™‚å…‰ã€‚</div>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-yellow-500 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        09:40 æ­¥è¡Œå‰å¾€ <a href="https://www.google.com/maps/search/?api=1&query=Kenchomae+Station+Okinawa" target="_blank" class="map-link">å–®è»Œç¸£å»³å‰ç«™<i class="fa-solid fa-map-location-dot map-icon"></i></a>
                    </div>
                    <div class="text-sm text-gray-600">ç›®æ¨™ï¼šã€Œç¸£å»³å‰ç«™ã€</div>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-blue-600 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">
                        10:00 æŠµé” <a href="https://www.google.com/maps/search/?api=1&query=Naha+Airport" target="_blank" class="map-link">é‚£éœ¸æ©Ÿå ´<i class="fa-solid fa-map-location-dot map-icon"></i></a>
                    </div>
                    <div class="mt-2 text-sm text-gray-600">
                        <span class="block mb-1">1. å…ˆå» 3F åœ‹éš›ç·šå ±åˆ°æ›è¡Œæ</span>
                        <span class="block">2. å†å» 2F åœ‹å…§ç·šæœ€å¾Œæ¡è²· (ç¦ç ‚å±‹/é£¯ç³°)</span>
                    </div>
                </div>

                <div class="relative pl-8">
                    <div class="absolute left-0 top-1 w-4 h-4 bg-gray-800 rounded-full border-2 border-white"></div>
                    <div class="font-bold text-gray-800">11:55 å¹³å®‰è¿”å° âœˆï¸</div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer with "Add to Home Screen" Instructions -->
    <footer class="pb-12 pt-8">
        <div class="mx-4 bg-gray-100 rounded-xl p-4 text-center border border-gray-200">
            <h3 class="font-bold text-gray-700 mb-2">ğŸ“± å¦‚ä½•å­˜æˆ App?</h3>
            <div class="grid grid-cols-2 gap-4 text-xs text-gray-600">
                <div>
                    <strong class="block text-gray-800 mb-1"><i class="fa-brands fa-apple"></i> iPhone (Safari)</strong>
                    é»æ“Šä¸‹æ–¹ã€Œåˆ†äº«ã€æŒ‰éˆ• <i class="fa-solid fa-arrow-up-from-bracket"></i><br>
                    é¸æ“‡ã€ŒåŠ å…¥ä¸»ç•«é¢ã€
                </div>
                <div>
                    <strong class="block text-gray-800 mb-1"><i class="fa-brands fa-android"></i> Android (Chrome)</strong>
                    é»æ“Šå³ä¸Šæ–¹é¸å–® <i class="fa-solid fa-ellipsis-vertical"></i><br>
                    é¸æ“‡ã€Œå®‰è£æ‡‰ç”¨ç¨‹å¼ã€æˆ–ã€ŒåŠ åˆ°ä¸»ç•«é¢ã€
                </div>
            </div>
        </div>
        <p class="text-center text-gray-400 text-sm mt-6">ç¥ æ²–ç¹©ä¹‹æ—… å¿«æ¨‚é †åˆ©ï¼</p>
    </footer>

    <!-- Script for Scroll Spy & Real-Time Data -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Scroll Spy Logic ---
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section');
            const headerOffset = 200;

            function changeLinkState() {
                let index = sections.length;
                while(--index && window.scrollY + headerOffset < sections[index].offsetTop) {}
                
                navLinks.forEach((link) => {
                    link.classList.remove('bg-blue-600', 'text-white');
                    link.classList.add('bg-white', 'text-blue-600');
                });

                if (index >= 0) {
                     navLinks[index].classList.remove('bg-white', 'text-blue-600');
                     navLinks[index].classList.add('bg-blue-600', 'text-white');
                     navLinks[index].scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                }
            }

            window.addEventListener('scroll', changeLinkState);
            changeLinkState();

            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    setTimeout(changeLinkState, 50);
                });
            });

            // --- Currency Calculator Logic (Offline + Realtime) ---
            const jpyInput = document.getElementById('calc-jpy');
            const twdInput = document.getElementById('calc-twd');
            const rateInput = document.getElementById('calc-rate');
            const rateStatus = document.getElementById('rate-status');
            const RATE_KEY = 'okinawa_exchange_rate';

            async function fetchLiveRate() {
                const savedRate = localStorage.getItem(RATE_KEY);
                if (savedRate) {
                    rateInput.value = savedRate;
                    rateStatus.innerHTML = '<span class="text-gray-500"><i class="fa-solid fa-clock-rotate-left"></i> ä¸Šæ¬¡ç´€éŒ„</span>';
                }

                try {
                    const response = await fetch('https://api.exchangerate-api.com/v4/latest/JPY');
                    const data = await response.json();
                    const twdRate = data.rates.TWD;

                    if (twdRate) {
                        const formattedRate = twdRate.toFixed(4);
                        rateInput.value = formattedRate;
                        rateStatus.innerHTML = '<span class="text-green-600"><i class="fa-solid fa-check-circle"></i> å·²æ›´æ–°</span>';
                        localStorage.setItem(RATE_KEY, formattedRate);
                        if (jpyInput.value) calculateFromJpy();
                    }
                } catch (error) {
                    if (savedRate) {
                         rateStatus.innerHTML = '<span class="text-orange-500"><i class="fa-solid fa-wifi-slash"></i> é›¢ç·šæ¨¡å¼</span>';
                    } else {
                        rateStatus.innerHTML = '<span class="text-gray-400">ä½¿ç”¨é è¨­å€¼</span>';
                    }
                }
            }

            function calculateFromJpy() {
                const jpy = parseFloat(jpyInput.value);
                const rate = parseFloat(rateInput.value);
                if (!isNaN(jpy) && !isNaN(rate)) {
                    twdInput.value = Math.round(jpy * rate);
                } else if (jpyInput.value === '') {
                    twdInput.value = '';
                }
            }

            function calculateFromTwd() {
                const twd = parseFloat(twdInput.value);
                const rate = parseFloat(rateInput.value);
                if (!isNaN(twd) && !isNaN(rate) && rate !== 0) {
                    jpyInput.value = Math.round(twd / rate);
                } else if (twdInput.value === '') {
                    jpyInput.value = '';
                }
            }

            jpyInput.addEventListener('input', calculateFromJpy);
            twdInput.addEventListener('input', calculateFromTwd);
            
            rateInput.addEventListener('input', () => {
                if (jpyInput.value !== '') calculateFromJpy();
                rateStatus.innerHTML = '<span class="text-blue-500">æ‰‹å‹•è¼¸å…¥</span>';
                localStorage.setItem(RATE_KEY, rateInput.value);
            });

            // --- Weather Fetch Logic (Forecast for 11/27-11/30) ---
            const forecastContainer = document.getElementById('forecast-container');

            async function fetchWeather() {
                try {
                    // Request Specific Dates: 2025-11-27 to 2025-11-30
                    const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=26.2124&longitude=127.6809&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_probability_max&timezone=Asia%2FTokyo&start_date=2025-11-27&end_date=2025-11-30');
                    const data = await response.json();
                    
                    if (!data.daily) throw new Error("No daily data");

                    const daily = data.daily;
                    let htmlContent = '';

                    // Loop through the 4 days
                    for (let i = 0; i < daily.time.length; i++) {
                        const dateStr = daily.time[i]; // "2025-11-27"
                        const maxTemp = Math.round(daily.temperature_2m_max[i]);
                        const minTemp = Math.round(daily.temperature_2m_min[i]);
                        const precip = daily.precipitation_probability_max[i];
                        const code = daily.weather_code[i];

                        // Format Date (e.g., "11/27 (å››)")
                        const dateObj = new Date(dateStr);
                        const dayOfWeek = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'][dateObj.getDay()];
                        const formattedDate = `${dateObj.getMonth() + 1}/${dateObj.getDate()} (${dayOfWeek})`;

                        // Weather Icon Logic
                        let iconClass = 'fa-cloud';
                        let iconColor = 'text-white';
                        if (code === 0) { iconClass = 'fa-sun'; iconColor = 'text-yellow-300'; }
                        else if (code <= 3) { iconClass = 'fa-cloud-sun'; }
                        else if (code <= 48) { iconClass = 'fa-smog'; }
                        else if (code <= 67) { iconClass = 'fa-cloud-rain'; iconColor = 'text-blue-200'; }
                        else if (code >= 80 && code <= 82) { iconClass = 'fa-cloud-showers-heavy'; iconColor = 'text-blue-300'; }
                        else if (code >= 95) { iconClass = 'fa-bolt'; iconColor = 'text-yellow-400'; }

                        // Rain badge logic: Always show, even if 0%
                        const precipValue = precip !== null ? precip : 0;
                        // Use gray for 0%, blue for any rain chance
                        const badgeColor = precipValue > 0 ? "text-blue-200" : "text-gray-300 opacity-60";
                        const rainBadge = `<span class="text-[10px] ${badgeColor} font-bold"><i class="fa-solid fa-umbrella"></i> ${precipValue}%</span>`;

                        htmlContent += `
                            <div class="flex flex-col items-center bg-white/10 rounded p-1 backdrop-blur-sm">
                                <div class="text-[10px] opacity-80 mb-1">${formattedDate}</div>
                                <div class="text-xl ${iconColor} mb-1"><i class="fa-solid ${iconClass}"></i></div>
                                <div class="text-xs font-bold mb-1">${minTemp}Â°-${maxTemp}Â°</div>
                                <div class="h-4 flex items-center">${rainBadge}</div> 
                            </div>
                        `;
                    }

                    forecastContainer.innerHTML = htmlContent;

                } catch (error) {
                    console.error('Weather fetch failed', error);
                    forecastContainer.innerHTML = '<div class="col-span-4 text-center text-xs opacity-70 py-2">æš«æ™‚ç„¡æ³•å–å¾—é å ±<br>è«‹é»æ“Šè©³æƒ…æŸ¥çœ‹</div>';
                }
            }

            // Init Fetches
            fetchLiveRate();
            fetchWeather();
        });
    </script>
</body>
</html>